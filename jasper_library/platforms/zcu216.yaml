name: zcu216
manufacturer: Xilinx
fpga: xczu49dr-ffvf1760-2-e-es1
family: zynq-ultrascaleplus-rfsoc
config_voltage: 1.8 # TODO: not used?
cfgbvs: GND         # TODO: not used?
backend_target: vivado
mmbus_architecture: AXI4-Lite
mmbus_base_address: 0xA0000000
# How to address each 32-bit (i.e. 4 indicates byte-addressable)
mmbus_address_alignment: 4
sources: []
constraints: []

rfdc:
  # gen3 devices can internally route their input refclk or the output of the RFPLL
  # as the sample clock for adjacent tiles. See PG269. For such configurations,
  # tile 225 is the preferred tile when available. The zcu216/208 eval boards only
  # have the sample clock connected to tile 255.
  #
  # For gen1 and gen2 devices the `adc_clk_src` is the same as the tile index
  tile224:
    has_adc_clk: False
    adc_clk_src: 2
  tile225:
    has_adc_clk: True
    adc_clk_src: 2
  tile226:
    has_adc_clk: True
    adc_clk_src: 2
  tile227:
    has_adc_clk: False
    adc_clk_src: 2

onehundredgbe:
  # TODO: what do we program the clock to
  refclk_freq_str: "156.25"
  cmac_loc:
  # TODO: test this out, or is it X0Y0
    - CMACE4_X0Y0
    
provides:
  - adc_clk
  - axil_clk # TODO: keep this?
  - sfp4x25  # TODO this isn't the right name
  - sysref_in

pins:
  clk_100_p:
    iostd: LVDS_25
    loc: G12
  clk_100_n:
    iostd: LVDS_25
    loc: G11
  clk_125_p:
    iostd: LVDS_25
    loc: A13
  clk_125_n:
    iostd: LVDS_25
    loc: A12

# NOTE: most of the IO constraints and clocking constraints are taken care of by
# the RFDC IP itself. Vivado has that baked into the output products of teh IP
# core. The only necessary pins below are the fabirc clocking related to
# multi-tile sync Adding additional pins and constraints would not hurt anything
# but provide more transparent less 'hand-wavy'
# RFDC clocking

  # `SYSREF_P/N_228` on bank 228
  # constraints determined by rfdc ip, iostandard and loc not set by user
  sysref_p:
    loc: D2
  sysref_n:
    loc: D1

  # `CLK104_PL_SYSREF_P/N` on HD bank 89, VCCO is 1.8 but LVDS_25 still
  # supported, see UG571 SelectIO Resources table 3-2 and DS926 tables 23, 24,
  # and 2
  pl_sysref_p:
    iostd: LVDS_25
    loc: E11
  pl_sysref_n:
    iostd: LVDS_25
    loc: D11

  # `CLK104_PL_CLK_P/N` on HD bank 89
  pl_clk_p:
    iostd: LVDS_25
    loc: E10
  pl_clk_n:
    iostd: LVDS_25
    loc: E9

  # Do not instantiate clock buffer inputs in the user design, part of the RF-ADC [PG269 v2.4 pg.153]
  adc_clk_224_p:
    loc: BA3
  adc_clk_224_n:
    loc: BB3

  # naming changes between quad- and dual-tile adcs
  # quad tile vinXZ
  # dual tile vinX_ZZ
  # X-tile location, Z refers to adc location in the tile (0-3), ZZ-is either 01
  # for lower ADC or 23 for upper
  vin00_p:
    loc: AU5
  vin00_n:
    loc: AU4

# 100 GbE
  # IDT 8A34001 output Q7, refclk1 GTY bank 129
  mgt_ref_clk_p:
    loc:
      - T34
  mgt_ref_clk_n:
    loc:
      - T35
  qsfp_mgt_tx_p:
    loc:
      # bank 128 SFP[0:1]
      - V38
      - U36
      # bank 129 SFP[2:3]
      - P38
      - N36
  qsfp_mgt_tx_n:
    loc:
      # bank 128
      - V39
      - U37
      # bank 129
      - P39
      - N37
  qsfp_mgt_rx_p:
    loc:
      # bank 128
      - AC41
      - AB39
      # bank 129
      - W41
      - U41
  qsfp_mgt_rx_n:
    loc:
      # bank 128
      - AC42
      - AB40
      # bank 129
      - W42
      - U42

  # TODO: what do we do here? These pins are strapped?
  #qsfp_modprs:

# zcu216 has 8 RGB LEDs (24 total) however, not all of the LEDs of the same
# color have the same voltage standard. Not sure how the tools can handle this
# if at all
  led_red:
    iostd: LVCMOS12
    loc:
      - AN14
      - AP16
      - AP14
      - AU16
      - AW12
      - AY16
      - BB12
      - E25
  led_green:
    iostd: [LVCMOS18, LVCMOS12]
    loc: [[C13, D14, D12, D13], [AW18, AV18, BA19, AP21]]

  led_blue:
    iostd: LVCMOS12
    loc:
      - B26
      - E24
      - G26
      - J23
      - L24
      - P21
      - AV21
      - AR21

  led:
    iostd: LVCMOS12
    loc:
      # red
      - AN14
      - AP16
      - AP14
      - AU16
      - AW12
      - AY16
      - BB12
      - E25
      # green - remaining 4 green leds are lvcmos18
      - AW18
      - AV18
      - BA19
      - AP21
      # blue
      - B26
      - E24
      - G26
      - J23
      - L24
      - P21
      - AV21
      - AR21
